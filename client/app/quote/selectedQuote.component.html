<ng-container *ngIf="!isEditing && quoteRecord">
  <div class="card">

    <div class="card-block">

      <div *ngIf="alert">
        <ngb-alert [type]="alert.type" (close)="closeAlert()">{{ alert.message }}</ngb-alert>
      </div>

      <h4 class = "card-header"> <edit-quote [quote]="quoteRecord.quote"></edit-quote> Quote details
      </h4>

      <table class="table table-responsive table-bordered">
        <thead class="thead-default">
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Created</th>
          <th>Required</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td>{{quoteRecord.quote.id}}</td>
          <td>{{quoteRecord.quote.title}}</td>
          <td>{{quoteRecord.quote.createdDate | date: 'EE dd/MM/yyyy'}}</td>
          <td>{{quoteRecord.quote.requiredDate | date: 'EE dd/MM/yyyy'}}</td>
        </tr>
        </tbody>
      </table>


      <h4 class = "card-header"><edit-customer (onCustomerCreated)="customerUpserted($event)" (onCustomerUpdated)="customerUpserted($event)" (onAlertCreated)="alertCreated($event)"  [customerRecord]="quoteRecord.customerRecord" [enquiry] = "quoteRecord.enquiry"></edit-customer>
      </h4>
      <table class="table table-responsive table-bordered">
        <thead class="thead-default">
        <tr>
          <th>Customer</th>
          <th>Company</th>
          <th>Email</th>
          <th>Direct</th>
          <th>Mobile</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td>{{quoteRecord.customerRecord.customer.name}}</td>
          <td>{{quoteRecord.customerRecord.company.name}}</td>
          <td>{{quoteRecord.customerRecord.customer.email}}</td>
          <td>{{quoteRecord.customerRecord.customer.directPhone}}</td>
          <td>{{quoteRecord.customerRecord.customer.mobilePhone}}</td>
        </tr>
        </tbody>
      </table>

      <table class="table table-responsive table-bordered">
        <thead class="thead-default">
        <tr>
          <th>Address type</th>
          <th>Name</th>
          <th>FAO</th>
          <th>Line1</th>
          <th>Line2</th>
          <th>Line3</th>
          <th>City</th>
          <th>County</th>
          <th>Postcode</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngIf="quoteRecord.customerRecord.invoiceAddress">
          <td>Invoice</td>
          <td>{{quoteRecord.customerRecord.invoiceAddress.name}}</td>
          <td>{{quoteRecord.customerRecord.invoiceAddress.fao}}</td>
          <td>{{quoteRecord.customerRecord.invoiceAddress.line1}}</td>
          <td>{{quoteRecord.customerRecord.invoiceAddress.line2}}</td>
          <td>{{quoteRecord.customerRecord.invoiceAddress.line3}}</td>
          <td>{{quoteRecord.customerRecord.invoiceAddress.townCity}}</td>
          <td>{{quoteRecord.customerRecord.invoiceAddress.county}}</td>
          <td>{{quoteRecord.customerRecord.invoiceAddress.postcode}}</td>
        </tr>
        <tr *ngIf="quoteRecord.customerRecord.deliveryAddress">
          <td>Delivery</td>
          <td>{{quoteRecord.customerRecord.deliveryAddress.name}}</td>
          <td>{{quoteRecord.customerRecord.deliveryAddress.fao}}</td>
          <td>{{quoteRecord.customerRecord.deliveryAddress.line1}}</td>
          <td>{{quoteRecord.customerRecord.deliveryAddress.line2}}</td>
          <td>{{quoteRecord.customerRecord.deliveryAddress.line3}}</td>
          <td>{{quoteRecord.customerRecord.deliveryAddress.townCity}}</td>
          <td>{{quoteRecord.customerRecord.deliveryAddress.county}}</td>
          <td>{{quoteRecord.customerRecord.deliveryAddress.postcode}}</td>
        </tr>
        </tbody>
      </table>


      <h4 class = "card-header"><button type="button" class="btn btn-sm btn-primary"
                                        (click)="openEditAddressModal(quoteRecord.deliveryAddress)"><i class="fa fa-edit"></i> Edit
      </button> Line items</h4>

      <table class="table table-responsive table-bordered">
        <thead class="thead-default">
        <tr>
          <th>Product</th>
          <th>Image</th>
          <th>Quantity</th>
          <th>Colour</th>
          <th>Price includes</th>
          <th>Cost</th>
          <th>Markup</th>
          <th>VAT</th>
          <th>Sell</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let lineItem of quoteLineItems">
          <ng-container *ngIf="lineItemProducts.get(lineItem.productId) as product">
            <td>{{product.productname}}</td>
            <td><img src="{{getThumb(product)}}"/></td>
            <td>{{lineItem.quantity}}</td>
            <td>{{lineItem.colour}}</td>
            <td>{{lineItem.priceIncludes}}</td>
            <td>{{lineItem.cost}}</td>
            <td>{{lineItem.markup}}</td>
            <td>{{lineItem.vat}}</td>
            <td>{{lineItem.sell}}</td>
          </ng-container>
        </tr>
        </tbody>
      </table>

    </div>
  </div>
</ng-container>


